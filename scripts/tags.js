!function(){function a(){var a=document.createElement("ul");a.classList.add("tags"),a.classList.add("show-all");for(var b=0;b<tagNames.length;b++){var c=document.createElement("li");c.innerHTML=tagNames[b],u[tagNames[b]]={elem:c,neighbours:[]},a.appendChild(c)}document.querySelector("main").insertBefore(a,document.querySelector(".posts"))}function b(){for(var a=0;a<r.length;a++)for(var b=0;b<r[a].tags.length;b++)for(var c=0;c<r[a].tags.length;c++)b!==c&&-1===u[r[a].tags[b]].neighbours.indexOf(r[a].tags[c])&&u[r[a].tags[b]].neighbours.push(r[a].tags[c]);for(var a=0;a<s.length;a++)for(var b=0;b<s[a].tags.length;b++)for(var c=0;c<s[a].tags.length;c++)b!==c&&-1===u[s[a].tags[b]].neighbours.indexOf(s[a].tags[c])&&u[s[a].tags[b]].neighbours.push(s[a].tags[c])}function c(){for(var a=document.querySelectorAll(".posts > li"),b=0;b<a.length;b++){r[b]={elem:a[b],tags:[]};for(var c=a[b].querySelectorAll(".post-labels a"),d=0;d<c.length;d++)r[b].tags[d]=c[d].innerHTML}}function d(){for(var a=document.querySelectorAll(".tags li"),b=0;b<a.length;b++)a[b].addEventListener("click",f)}function e(){var a=q("t");if(a)for(var b=a.split(","),c=0;c<b.length;c++)f.call(u[b[c]].elem);for(var c=0;c<r.length;c++)r[c].elem.classList.add("active")}function f(){this.classList.contains("selected")?(this.classList.remove("selected"),g(this.innerHTML),n(this.innerHTML)):(this.classList.add("selected"),h(this.innerHTML),m(this.innerHTML))}function g(a){for(var b=0;b<t.length;b++)if(t[b]===a){t.splice(b,1);break}j(a)}function h(a){t.push(a),i(a)}function i(a){for(var b=0;b<r.length;b++)-1===r[b].tags.indexOf(a)&&l(b--)}function j(a){if(!t.length)for(var b=0;b<s.length;b++)k(b--);for(var b=0;b<s.length;b++)if(-1===s[b].tags.indexOf(a)){for(var c=!0,d=0;d<t.length;d++)if(-1===s[b].tags.indexOf(t[d])){c=!1;break}c&&k(b--)}}function k(a){s[a].elem.classList.add("active"),r.push(s[a]),s.splice(a,1)}function l(a){r[a].elem.classList.remove("active"),s.push(r[a]),r.splice(a,1)}function m(a){if(document.querySelector(".tags").classList.contains("show-all")&&document.querySelector(".tags").classList.remove("show-all"),1===t.length)for(var b=0;b<u[a].neighbours.length;b++)u[u[a].neighbours[b]].elem.classList.add("active");else{for(var c=!0,b=0;b<t.length;b++)t[b]!==a&&-1===u[t[b]].neighbours.indexOf(a)&&(c=!1);if(c)for(var d=document.querySelectorAll(".tags .active:not(.selected)"),b=0;b<d.length;b++)-1===u[a].neighbours.indexOf(d[b].innerHTML)&&d[b].classList.remove("active");else for(var d=document.querySelectorAll(".tags .active:not(.selected)"),b=0;b<d.length;b++)d[b].classList.remove("active")}u[a].elem.classList.add("active")}function n(a){if(t.length){if(p())for(var b=document.querySelectorAll(".tags li:not(.active)"),c=0;c<b.length;c++)o(b[c]);for(var d=!1,c=0;c<t.length;c++)for(var e=0;e<u[t[c]].neighbours.length;e++)if(-1===u[t[c]].neighbours.indexOf(a)){d=!0;break}d&&u[a].elem.classList.remove("active"),o(u[a].elem)}else{document.querySelector(".tags").classList.add("show-all");for(var c=0;c<u.length;c++)u[c].elem.classList.remove("active")}}function o(a){for(var b=!1,c=0;c<t.length;c++)if(-1===u[t[c]].neighbours.indexOf(a.innerHTML)){b=!0;break}b||a.classList.add("active")}function p(){for(var a=0;a<t.length;a++)for(var b=a+1;b<t.length;b++)if(-1===u[t[a]].neighbours.indexOf(t[b])||-1===u[t[b]].neighbours.indexOf(t[a]))return!1;return!0}function q(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))}var r=[],s=[],t=[],u={};c(),a(),b(),d(),e()}();