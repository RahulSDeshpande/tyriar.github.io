!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["map-node"],b):"object"==typeof exports?module.exports=b(require("./map-node")):a.Map=b(MapNode)}(this,function(a){"use strict";function b(b,c){this.width=b,this.height=c,this.start=new a(0,0),this.goal=new a(b-1,c-1),this.configuration=void 0,this.clear()}return b.prototype=Array.prototype,b.prototype.constructor=b,b.prototype.clear=function(){this.length=this.width;for(var a=0;a<this.width;a++){this[a]||(this[a]=[]),this[a].length=this.height;for(var b=0;b<this.height;b++)this[a][b]=!0}this.setGoal(this.width-1,this.height-1)},b.prototype.generate=function(a,b,c,d){if(!(0>=d||c>90)){void 0!==c&&(this.configuration={obstacleDensity:c,obstacleSize:d}),this.width=a,this.height=b,this.clear();for(var e=this.width*this.height,f=Math.floor(e*this.configuration.obstacleDensity/100),g=0;f>g;){var h=Math.floor(Math.random()*this.width),i=Math.floor(Math.random()*this.height);g+=this.placeObstacles(h,i,this.configuration.obstacleSize)}}},b.prototype.setGoal=function(a,b){this.isOnMap(a,b)&&(this.goal.x=a,this.goal.y=b)},b.prototype.isOnMap=function(a,b){return a>=0&&a<this.width&&b>=0&&b<this.height},b.prototype.placeObstacles=function(a,b,c){for(var d=0,e=Math.floor(c/2),f=Math.ceil(c/2),g=a-e;a+f>=g;g++)for(var h=b-e;b+f>=h;h++)this.isOnMap(g,h)&&this[g][h]&&(g===this.start.x&&h===this.start.y||g===this.goal.x&&h===this.goal.y||(this[g][h]=!1,d++));return d},b});