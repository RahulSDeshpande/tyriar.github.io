!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["core","canvas-helper","map-node","a-star-common"],b):"object"==typeof exports?module.exports=b(require("./core"),require("./canvas-helper"),require("./map-node"),require("./a-star-common")):a.aStarArray=b(core,canvasHelper,MapNode,aStarCommon)}(this,function(a,b,c,d){"use strict";function e(a,c,e,g,h){for(var i=0;i<a.length;i++)if(-1===f(g,a[i])){var j=f(e,a[i]);-1===j?(a[i].f=a[i].g+d.heuristic(a[i],c),e.push(a[i]),h.push({f:b.drawOpenListNode,x:a[i].x,y:a[i].y})):a[i].g<e[j].g&&(a[i].f=a[i].g+d.heuristic(a[i],c),e[j]=a[i])}}function f(a,b){for(var c=0;c<a.length;c++)if(b.equals(a[c]))return c;return-1}var g={};return g.run=function(a,c){var f,g=[],h=[],i=a.start,j=a.goal,k=[];for(i.f=i.g+d.heuristic(i,j),h.push(i);h.length>0;){var l=0;for(f=1;f<h.length;f++)h[f].f<h[l].f&&(l=f);var m=h[l];if(m.equals(j)){var n=performance.now(),o=d.buildSummaryMessage(a,h.length,g.length);return void c(o,k,m,h,n)}h.splice(l,1),g.push(m),k.push({f:b.drawVisited,x:m.x,y:m.y});var p=d.getNeighbourNodes(a,m);e(p,j,h,g,k)}c([{result:"No path exists"}],k,void 0,void 0,performance.now())},g});